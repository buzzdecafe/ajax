var flapjax=function(){"use strict";function t(t,n){return n={exports:{}},t(n,n.exports),n.exports}function n(t){return new c(function(n,e){var r=new XMLHttpRequest;return r.open(t.method,t.url,!0),r.withCredentials=!!t.withCredentials,r.timeout=t.timeout||0,r.responseType=t.responseType||"text",r=f(t.headers||{},r),r=p(t.events||{},r),r.addEventListener("readystatechange",function(t){return function r(){t.readyState===t.DONE&&(t.removeEventListener("readystatechange",r,!1),t.status>=200&&t.status<300?e(t):n(t))}}(r),!1),r.send(t.body),function(){r.readyState<r.DONE&&r.abort()}})}var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},r=t(function(t){!function(n){t.exports=function(){function t(t){return null!=t&&null!=t.constructor&&t.constructor.prototype!==t&&"string"==typeof t.constructor[n]?t.constructor[n]:Object.prototype.toString.call(t).slice("[object ".length,-"]".length)}var n="@@type";return t}()}()}),u=t(function(t){!function(n){t.exports=function(t){function n(t){return function(n){return t.concat(n)}}function e(t){return function(n){return t}}function r(t,n){return Object.prototype.hasOwnProperty.call(n,t)}function u(t){return t}function o(t){return function(n){return[t,n]}}function i(t){return{value:t,done:!1}}function a(t){return{value:t,done:!0}}function c(t,n,e){if(!(this instanceof c))return new c(t,n,e);this.name=t,this.test=function(t){return n.every(function(n){return n.test(t)})&&e(t)}}function f(t,n,e){for(var u=e,o=0;o<n.length;o+=1){var i=n[o];if(null==u||!t&&!r(i,u))return null;u=u[i]}return"function"==typeof u?u:null}function s(t,n){return f(!0,t,n)}function p(t){return f(!1,t,nn)}function h(n,e,r){function u(n){var e="fantasy-land/"+n;return r[n]===Tt?function(t){var n=s([e],t);return null==n&&"function"==typeof t?p([Et(t),e]):n}:function(n){var r=null!=n&&null!=n.constructor&&n.constructor.prototype===n,u=null;return r||(u=s([e],n)),null==u&&(u=p([t(n),"prototype",e])),u&&u.bind(n)}}var o="sanctuary-type-classes/"+n,i=Object.keys(r),a=c(o,e,function(t){return i.every(function(n){var e=r[n]===Tt?t.constructor:t;return null!=u(n)(e)})});return a.methods=i.reduce(function(t,n){return t[n]=u(n),t},{}),a}function l(){return"null"}function y(t){return!0}function d(){return"undefined"}function _(t){return!0}function v(){return"object"==typeof this?"new Boolean("+en(this.valueOf())+")":this.toString()}function m(t){return typeof t==typeof this&&t.valueOf()===this.valueOf()}function g(){return"object"==typeof this?"new Number("+en(this.valueOf())+")":1/this==-1/0?"-0":this.toString(10)}function F(t){return"object"==typeof t?"object"==typeof this&&rn(this.valueOf(),t.valueOf()):isNaN(t)&&isNaN(this)||t===this&&1/t==1/this}function b(){var t=isNaN(this.valueOf())?NaN:this.toISOString();return"new Date("+en(t)+")"}function w(t){return rn(this.valueOf(),t.valueOf())}function S(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}function j(){return""}function O(){return"object"==typeof this?"new String("+en(this.valueOf())+")":'"'+this.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}function x(t){return typeof t==typeof this&&t.valueOf()===this.valueOf()}function A(t){return this+t}function q(){return[]}function R(t){return[t]}function k(t,n){for(var e=[n],r=[];e.length>0;){for(var u=t(i,a,e.shift()),o=[],c=0;c<u.length;c+=1)(u[c].done?r:o).push(u[c].value);Array.prototype.unshift.apply(e,o)}return r}function T(){return[]}function C(){for(var t=this.map(en),n=Object.keys(this).sort(),e=0;e<n.length;e+=1){var r=n[e];/^\d+$/.test(r)||t.push(en(r)+": "+en(this[r]))}return"["+t.join(", ")+"]"}function E(t){if(t.length!==this.length)return!1;for(var n=0;n<this.length;n+=1)if(!rn(this[n],t[n]))return!1;return!0}function P(t){return this.concat(t)}function N(t){return this.map(function(n){return t(n)})}function M(t){for(var n=[],e=0;e<t.length;e+=1)for(var r=0;r<this.length;r+=1)n.push(t[e](this[r]));return n}function B(t){var n=[];return this.forEach(function(e){Array.prototype.push.apply(n,t(e))}),n}function z(t,n){return this.reduce(function(n,e){return t(n,e)},n)}function I(t,e){function r(i,a){switch(a){case 0:return vt(t,[]);case 2:return lt(o,e(u[i]),e(u[i+1]));default:var c=2*Math.floor(a/4);return lt(n,r(i,c),r(i+c,a-c))}}var u=this;return this.length%2==1?lt(n,ft(R,e(this[0])),r(1,this.length-1)):r(0,this.length)}function L(t){return[t(this)]}function D(){return"(function () { return arguments; }("+Array.prototype.map.call(this,en).join(", ")+"))"}function W(t){return E.call(this,t)}function Q(){return"new "+this.name+"("+en(this.message)+")"}function H(t){return rn(this.name,t.name)&&rn(this.message,t.message)}function U(){return{}}function V(){return{}}function Y(){for(var t=[],n=Object.keys(this).sort(),e=0;e<n.length;e+=1){var r=n[e];t.push(en(r)+": "+en(this[r]))}return"{"+t.join(", ")+"}"}function $(t){var n=this,e=Object.keys(this).sort();return rn(e,Object.keys(t).sort())&&e.every(function(e){return rn(n[e],t[e])})}function X(t){var n={};for(var e in this)n[e]=this[e];for(e in t)n[e]=t[e];return n}function G(t){var n={};for(var e in this)n[e]=t(this[e]);return n}function J(t){var n={};for(var e in this)e in t&&(n[e]=t[e](this[e]));return n}function K(t,n){var e=n;for(var r in this)e=t(e,this[r]);return e}function Z(t){return function(n){return t}}function tt(t,n){return function(e){for(var r=i(n);!r.done;)r=t(i,a,r.value)(e);return r.value}}function nt(t){return t===this}function et(t){var n=this;return function(e){return t(n(e))}}function rt(t,n){var e=this;return function(r){return n(e(t(r)))}}function ut(t){var n=this;return function(e){return t(e)(n(e))}}function ot(t){var n=this;return function(e){return t(n(e))(e)}}function it(t){var n=this;return function(e){return n(t(e))}}function at(t,n){return Nt.methods.concat(t)(n)}function ct(t){return Mt.methods.empty(t)()}function ft(t,n){return Bt.methods.map(n)(t)}function st(t,n,e){return zt.methods.bimap(e)(t,n)}function pt(t,n,e){return It.methods.promap(e)(t,n)}function ht(t,n){return Lt.methods.ap(n)(t)}function lt(t,n,e){return ht(ft(t,n),e)}function yt(t,n,e,r){return ht(ht(ft(t,n),e),r)}function dt(t,n){return lt(e,t,n)}function _t(t,n){return lt(e(u),t,n)}function vt(t,n){return Dt.methods.of(t)(n)}function mt(t,n){return Wt.methods.chain(n)(t)}function gt(t){return mt(u,t)}function Ft(t,n,e){return Qt.methods.chainRec(t)(n,e)}function bt(t,n){var e=n.constructor;return Ot(function(n,r){return t(r)?at(n,vt(e,r)):n},ct(e),n)}function wt(t,n){var e=n.constructor,r=jt(e);return mt(function(n){return t(n)?vt(e,n):r},n)}function St(t,n){return Ut.methods.alt(t)(n)}function jt(t){return Vt.methods.zero(t)()}function Ot(t,n,e){return $t.methods.reduce(e)(t,n)}function xt(t,n,e){return Xt.methods.traverse(e)(t,n)}function At(t,n){return xt(t,u,n)}function qt(t,n){return Gt.methods.extend(n)(t)}function Rt(t){return Jt.methods.extract(t)()}function kt(t,n){return Kt.methods.contramap(n)(t)}c["@@type"]="sanctuary-type-classes/TypeClass";var Tt="Constructor",Ct="Value",Et="name"in function(){}?function(t){return t.name}:function(t){var n=/function (\w*)/.exec(t);return null==n?"":n[1]},Pt=h("Setoid",[],{equals:Ct}),Nt=h("Semigroup",[],{concat:Ct}),Mt=h("Monoid",[Nt],{empty:Tt}),Bt=h("Functor",[],{map:Ct}),zt=h("Bifunctor",[Bt],{bimap:Ct}),It=h("Profunctor",[Bt],{promap:Ct}),Lt=h("Apply",[Bt],{ap:Ct}),Dt=h("Applicative",[Lt],{of:Tt}),Wt=h("Chain",[Lt],{chain:Ct}),Qt=h("ChainRec",[Wt],{chainRec:Tt}),Ht=h("Monad",[Dt,Wt],{}),Ut=h("Alt",[Bt],{alt:Ct}),Vt=h("Plus",[Ut],{zero:Tt}),Yt=h("Alternative",[Dt,Vt],{}),$t=h("Foldable",[],{reduce:Ct}),Xt=h("Traversable",[Bt,$t],{traverse:Ct}),Gt=h("Extend",[Bt],{extend:Ct}),Jt=h("Comonad",[Gt],{extract:Ct}),Kt=h("Contravariant",[],{contramap:Ct}),Zt=P,tn=X,nn={Null:{prototype:{toString:l,"fantasy-land/equals":y}},Undefined:{prototype:{toString:d,"fantasy-land/equals":_}},Boolean:{prototype:{toString:v,"fantasy-land/equals":m}},Number:{prototype:{toString:g,"fantasy-land/equals":F}},Date:{prototype:{toString:b,"fantasy-land/equals":w}},RegExp:{prototype:{"fantasy-land/equals":S}},String:{"fantasy-land/empty":j,prototype:{toString:O,"fantasy-land/equals":x,"fantasy-land/concat":A}},Array:{"fantasy-land/empty":q,"fantasy-land/of":R,"fantasy-land/chainRec":k,"fantasy-land/zero":T,prototype:{toString:C,"fantasy-land/equals":E,"fantasy-land/concat":P,"fantasy-land/map":N,"fantasy-land/ap":M,"fantasy-land/chain":B,"fantasy-land/alt":Zt,"fantasy-land/reduce":z,"fantasy-land/traverse":I,"fantasy-land/extend":L}},Arguments:{prototype:{toString:D,"fantasy-land/equals":W}},Error:{prototype:{toString:Q,"fantasy-land/equals":H}},Object:{"fantasy-land/empty":U,"fantasy-land/zero":V,prototype:{toString:Y,"fantasy-land/equals":$,"fantasy-land/concat":X,"fantasy-land/map":G,"fantasy-land/ap":J,"fantasy-land/alt":tn,"fantasy-land/reduce":K}},Function:{"fantasy-land/of":Z,"fantasy-land/chainRec":tt,prototype:{"fantasy-land/equals":nt,"fantasy-land/map":et,"fantasy-land/promap":rt,"fantasy-land/ap":ut,"fantasy-land/chain":ot,"fantasy-land/contramap":it}}},en=function(){function n(t,n){e.push(n);try{return t.call(n)}finally{e.pop()}}var e=[];return function(r){if(e.indexOf(r)>=0)return"<Circular>";var u=t(r);if("Object"===u){var o;try{o=n(r.toString,r)}catch(t){}if(null!=o&&"[object Object]"!==o)return o}return n(p([u,"prototype","toString"])||r.toString,r)}}(),rn=function(){var n=[];return function(e,r){if(t(e)!==t(r))return!1;if(n.some(function(t){return t[0]===e&&t[1]===r}))return!0;n.push([e,r]);try{return Pt.test(e)&&Pt.test(r)&&Pt.methods.equals(e)(r)}finally{n.pop()}}}();return{TypeClass:c,Setoid:Pt,Semigroup:Nt,Monoid:Mt,Functor:Bt,Bifunctor:zt,Profunctor:It,Apply:Lt,Applicative:Dt,Chain:Wt,ChainRec:Qt,Monad:Ht,Alt:Ut,Plus:Vt,Alternative:Yt,Foldable:$t,Traversable:Xt,Extend:Gt,Comonad:Jt,Contravariant:Kt,toString:en,equals:rn,concat:at,empty:ct,map:ft,bimap:st,promap:pt,ap:ht,lift2:lt,lift3:yt,apFirst:dt,apSecond:_t,of:vt,chain:mt,join:gt,chainRec:Ft,filter:bt,filterM:wt,alt:St,zero:jt,reduce:Ot,traverse:xt,sequence:At,extend:qt,extract:Rt,contramap:kt}}(r)}()}),o=t(function(t){!function(n,e){t?t.exports=e(u,r):n.concurrify=e(n.sanctuaryTypeClasses,n.sanctuaryTypeIdentifiers)}(e||window||e,function(t,n){function e(t){return"function"==typeof t}function r(t){return t.length>=2}function u(n){try{return t.Applicative.test(t.of(n))}catch(t){return!1}}function o(n,e,r,u){throw new TypeError(n+" expects its "+h[e]+" argument to "+r+"\n  Actual: "+t.toString(u))}function i(n,e,r){throw new TypeError(n+" was invoked outside the context of a "+r+". \n  Called on: "+t.toString(e))}function a(t){return t[t.length-1]}function c(t){return t[p]||t.name||"Anonymous"}function f(t,n,e){return n===e.length-1?"Concurrent"+t:t}function s(t){return t.split("/").map(f).join("/")}var p="@@type",h=["first","second","third","fourth","fifth"];return function(f,h,l,y){function d(t){this.sequential=t}function _(t){return t instanceof f||Boolean(t)&&t.constructor===f||n(t)===f[p]}function v(t){return t instanceof d||Boolean(t)&&t.constructor===d||n(t)===F}function m(t){return _(t)||o(F,0,'be of type "'+g+'"',t),new d(t)}var g=c(f),F=s(g);u(f)||o("concurrify",0,"represent an Applicative",f),_(h)||o("concurrify",1,'be of type "'+g+'"',h),e(l)||o("concurrify",2,"be a function",l),r(l)||o("concurrify",2,"be binary",l),e(y)||o("concurrify",3,"be a function",y),r(y)||o("concurrify",3,"be binary",y);var b=d.prototype=m.prototype={constructor:m};m[p]=F;var w=new d(h);return m["fantasy-land/zero"]=function(){return w},m["fantasy-land/of"]=function(n){return new d(t.of(f,n))},b["fantasy-land/map"]=function(n){return v(this)||i(F+"#map",this,F),e(n)||o(F+"#map",0,"be a function",n),new d(t.map(n,this.sequential))},b["fantasy-land/ap"]=function(t){return v(this)||i(F+"#ap",this,F),v(t)||o(F+"#ap",0,"be a "+F,t),new d(y(this.sequential,t.sequential))},b["fantasy-land/alt"]=function(t){return v(this)||i(F+"#alt",this,F),v(t)||o(F+"#alt",0,"be a "+F,t),new d(l(this.sequential,t.sequential))},b.toString=function(){return v(this)||i(F+"#toString",this,F),a(F.split("/"))+"("+t.toString(this.sequential)+")"},m}})}),i=t(function(t){!function(n){t.exports=function(){function t(t){if("number"!=typeof t)throw new TypeError("inspectf expects its first argument to be a number")}function n(t){if("function"!=typeof t)throw new TypeError("inspectf expects its second argument to be a function")}function e(t){return s.test(t)}function r(t){return t.match(f)[0].length}function u(t){var n=t.filter(e),u=n.map(r),o=u.reduce(Math.min,1/0),i=u.map(function(t){return t-o}).find(function(t){return t>1})||2;return{depth:o,tabsize:i}}function o(t){return new Array(t+1).join(" ")}function i(t,n){return t.toString().replace(p,n)}function a(t){return t.split(h)}function c(t,n){var e=u(t.slice(1)),i=new RegExp(o(e.tabsize),"g");return t.map(function(t){return t.slice(Math.min(e.depth,r(t))).replace(i,"\t").replace(p,n)}).join("\n")}var f=/^ */,s=/\s*[^\s]/,p=/\t/g,h=/\n\r?/;return function e(r,u){if(t(r),arguments.length<2)return function(t){return e(r,t)};if(n(u),u.toString!==Function.prototype.toString)return u.toString();var f=o(r),s=i(u,f),p=a(s);return p.length<2?s:c(p,f)}}()}()}),a=t(function(t){!function(n){t.exports=function(t){function n(t){return function(n){return t.concat(n)}}function e(t){return function(n){return t}}function r(t,n){return Object.prototype.hasOwnProperty.call(n,t)}function u(t){return t}function o(t){return function(n){return[t,n]}}function i(t){return{value:t,done:!1}}function a(t){return{value:t,done:!0}}function c(t,n,e){if(!(this instanceof c))return new c(t,n,e);this.name=t,this.test=function(t){return n.every(function(n){return n.test(t)})&&e(t)}}function f(t,n,e){for(var u=e,o=0;o<n.length;o+=1){var i=n[o];if(null==u||!t&&!r(i,u))return null;u=u[i]}return"function"==typeof u?u:null}function s(t,n){return f(!0,t,n)}function p(t){return f(!1,t,nn)}function h(n,e,r){function u(n){var e="fantasy-land/"+n;return r[n]===Tt?function(t){var n=s([e],t);return null==n&&"function"==typeof t?p([Et(t),e]):n}:function(n){var r=null!=n&&null!=n.constructor&&n.constructor.prototype===n,u=null;return r||(u=s([e],n)),null==u&&(u=p([t(n),"prototype",e])),u&&u.bind(n)}}var o="sanctuary-type-classes/"+n,i=Object.keys(r),a=c(o,e,function(t){return i.every(function(n){var e=r[n]===Tt?t.constructor:t;return null!=u(n)(e)})});return a.methods=i.reduce(function(t,n){return t[n]=u(n),t},{}),a}function l(){return"null"}function y(t){return!0}function d(){return"undefined"}function _(t){return!0}function v(){return"object"==typeof this?"new Boolean("+en(this.valueOf())+")":this.toString()}function m(t){return typeof t==typeof this&&t.valueOf()===this.valueOf()}function g(){return"object"==typeof this?"new Number("+en(this.valueOf())+")":1/this==-1/0?"-0":this.toString(10)}function F(t){return"object"==typeof t?"object"==typeof this&&rn(this.valueOf(),t.valueOf()):isNaN(t)&&isNaN(this)||t===this&&1/t==1/this}function b(){var t=isNaN(this.valueOf())?NaN:this.toISOString();return"new Date("+en(t)+")"}function w(t){return rn(this.valueOf(),t.valueOf())}function S(t){return t.source===this.source&&t.global===this.global&&t.ignoreCase===this.ignoreCase&&t.multiline===this.multiline&&t.sticky===this.sticky&&t.unicode===this.unicode}function j(){return""}function O(){return"object"==typeof this?"new String("+en(this.valueOf())+")":'"'+this.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}function x(t){return typeof t==typeof this&&t.valueOf()===this.valueOf()}function A(t){return this+t}function q(){return[]}function R(t){return[t]}function k(t,n){for(var e=[n],r=[];e.length>0;){for(var u=t(i,a,e.shift()),o=[],c=0;c<u.length;c+=1)(u[c].done?r:o).push(u[c].value);Array.prototype.unshift.apply(e,o)}return r}function T(){return[]}function C(){for(var t=this.map(en),n=Object.keys(this).sort(),e=0;e<n.length;e+=1){var r=n[e];/^\d+$/.test(r)||t.push(en(r)+": "+en(this[r]))}return"["+t.join(", ")+"]"}function E(t){if(t.length!==this.length)return!1;for(var n=0;n<this.length;n+=1)if(!rn(this[n],t[n]))return!1;return!0}function P(t){return this.concat(t)}function N(t){return this.map(function(n){return t(n)})}function M(t){for(var n=[],e=0;e<t.length;e+=1)for(var r=0;r<this.length;r+=1)n.push(t[e](this[r]));return n}function B(t){var n=[];return this.forEach(function(e){Array.prototype.push.apply(n,t(e))}),n}function z(t,n){return this.reduce(function(n,e){return t(n,e)},n)}function I(t,e){function r(i,a){switch(a){case 0:return vt(t,[]);case 2:return lt(o,e(u[i]),e(u[i+1]));default:var c=2*Math.floor(a/4);return lt(n,r(i,c),r(i+c,a-c))}}var u=this;return this.length%2==1?lt(n,ft(R,e(this[0])),r(1,this.length-1)):r(0,this.length)}function L(t){return[t(this)]}function D(){return"(function () { return arguments; }("+Array.prototype.map.call(this,en).join(", ")+"))"}function W(t){return E.call(this,t)}function Q(){return"new "+this.name+"("+en(this.message)+")"}function H(t){return rn(this.name,t.name)&&rn(this.message,t.message)}function U(){return{}}function V(){return{}}function Y(){for(var t=[],n=Object.keys(this).sort(),e=0;e<n.length;e+=1){var r=n[e];t.push(en(r)+": "+en(this[r]))}return"{"+t.join(", ")+"}"}function $(t){var n=this,e=Object.keys(this).sort();return rn(e,Object.keys(t).sort())&&e.every(function(e){return rn(n[e],t[e])})}function X(t){var n={};for(var e in this)n[e]=this[e];for(e in t)n[e]=t[e];return n}function G(t){var n={};for(var e in this)n[e]=t(this[e]);return n}function J(t){var n={};for(var e in this)e in t&&(n[e]=t[e](this[e]));return n}function K(t,n){var e=n;for(var r in this)e=t(e,this[r]);return e}function Z(t){return function(n){return t}}function tt(t,n){return function(e){for(var r=i(n);!r.done;)r=t(i,a,r.value)(e);return r.value}}function nt(t){return t===this}function et(t){var n=this;return function(e){return t(n(e))}}function rt(t,n){var e=this;return function(r){return n(e(t(r)))}}function ut(t){var n=this;return function(e){return t(e)(n(e))}}function ot(t){var n=this;return function(e){return t(n(e))(e)}}function it(t){var n=this;return function(e){return n(t(e))}}function at(t,n){return Nt.methods.concat(t)(n)}function ct(t){return Mt.methods.empty(t)()}function ft(t,n){return Bt.methods.map(n)(t)}function st(t,n,e){return zt.methods.bimap(e)(t,n)}function pt(t,n,e){return It.methods.promap(e)(t,n)}function ht(t,n){return Lt.methods.ap(n)(t)}function lt(t,n,e){return ht(ft(t,n),e)}function yt(t,n,e,r){return ht(ht(ft(t,n),e),r)}function dt(t,n){return lt(e,t,n)}function _t(t,n){return lt(e(u),t,n)}function vt(t,n){return Dt.methods.of(t)(n)}function mt(t,n){return Wt.methods.chain(n)(t)}function gt(t){return mt(u,t)}function Ft(t,n,e){return Qt.methods.chainRec(t)(n,e)}function bt(t,n){var e=n.constructor;return Ot(function(n,r){return t(r)?at(n,vt(e,r)):n},ct(e),n)}function wt(t,n){var e=n.constructor,r=ct(e);return mt(function(n){return t(n)?vt(e,n):r},n)}function St(t,n){return Ut.methods.alt(t)(n)}function jt(t){return Vt.methods.zero(t)()}function Ot(t,n,e){return $t.methods.reduce(e)(t,n)}function xt(t,n,e){return Xt.methods.traverse(e)(t,n)}function At(t,n){return xt(t,u,n)}function qt(t,n){return Gt.methods.extend(n)(t)}function Rt(t){return Jt.methods.extract(t)()}function kt(t,n){return Kt.methods.contramap(n)(t)}c["@@type"]="sanctuary-type-classes/TypeClass";var Tt="Constructor",Ct="Value",Et="name"in function(){}?function(t){return t.name}:function(t){var n=/function (\w*)/.exec(t);return null==n?"":n[1]},Pt=h("Setoid",[],{equals:Ct}),Nt=h("Semigroup",[],{concat:Ct}),Mt=h("Monoid",[Nt],{empty:Tt}),Bt=h("Functor",[],{map:Ct}),zt=h("Bifunctor",[Bt],{bimap:Ct}),It=h("Profunctor",[Bt],{promap:Ct}),Lt=h("Apply",[Bt],{ap:Ct}),Dt=h("Applicative",[Lt],{of:Tt}),Wt=h("Chain",[Lt],{chain:Ct}),Qt=h("ChainRec",[Wt],{chainRec:Tt}),Ht=h("Monad",[Dt,Wt],{}),Ut=h("Alt",[Bt],{alt:Ct}),Vt=h("Plus",[Ut],{zero:Tt}),Yt=h("Alternative",[Dt,Vt],{}),$t=h("Foldable",[],{reduce:Ct}),Xt=h("Traversable",[Bt,$t],{traverse:Ct}),Gt=h("Extend",[Bt],{extend:Ct}),Jt=h("Comonad",[Gt],{extract:Ct}),Kt=h("Contravariant",[],{contramap:Ct}),Zt=P,tn=X,nn={Null:{prototype:{toString:l,"fantasy-land/equals":y}},Undefined:{prototype:{toString:d,"fantasy-land/equals":_}},Boolean:{prototype:{toString:v,"fantasy-land/equals":m}},Number:{prototype:{toString:g,"fantasy-land/equals":F}},Date:{prototype:{toString:b,"fantasy-land/equals":w}},RegExp:{prototype:{"fantasy-land/equals":S}},String:{"fantasy-land/empty":j,prototype:{toString:O,"fantasy-land/equals":x,"fantasy-land/concat":A}},Array:{"fantasy-land/empty":q,"fantasy-land/of":R,"fantasy-land/chainRec":k,"fantasy-land/zero":T,prototype:{toString:C,"fantasy-land/equals":E,"fantasy-land/concat":P,"fantasy-land/map":N,"fantasy-land/ap":M,"fantasy-land/chain":B,"fantasy-land/alt":Zt,"fantasy-land/reduce":z,"fantasy-land/traverse":I,"fantasy-land/extend":L}},Arguments:{prototype:{toString:D,"fantasy-land/equals":W}},Error:{prototype:{toString:Q,"fantasy-land/equals":H}},Object:{"fantasy-land/empty":U,"fantasy-land/zero":V,prototype:{toString:Y,"fantasy-land/equals":$,"fantasy-land/concat":X,"fantasy-land/map":G,"fantasy-land/ap":J,"fantasy-land/alt":tn,"fantasy-land/reduce":K}},Function:{"fantasy-land/of":Z,"fantasy-land/chainRec":tt,prototype:{"fantasy-land/equals":nt,"fantasy-land/map":et,"fantasy-land/promap":rt,"fantasy-land/ap":ut,"fantasy-land/chain":ot,"fantasy-land/contramap":it}}},en=function(){function n(t,n){e.push(n);try{return t.call(n)}finally{e.pop()}}var e=[];return function(r){if(e.indexOf(r)>=0)return"<Circular>";var u=t(r);if("Object"===u){var o;try{o=n(r.toString,r)}catch(t){}if(null!=o&&"[object Object]"!==o)return o}return n(p([u,"prototype","toString"])||r.toString,r)}}(),rn=function(){var n=[];return function(e,r){if(t(e)!==t(r))return!1;if(n.some(function(t){return t[0]===e&&t[1]===r}))return!0;n.push([e,r]);try{return Pt.test(e)&&Pt.test(r)&&Pt.methods.equals(e)(r)}finally{n.pop()}}}();return{TypeClass:c,Setoid:Pt,Semigroup:Nt,Monoid:Mt,Functor:Bt,Bifunctor:zt,Profunctor:It,Apply:Lt,Applicative:Dt,Chain:Wt,ChainRec:Qt,Monad:Ht,Alt:Ut,Plus:Vt,Alternative:Yt,Foldable:$t,Traversable:Xt,Extend:Gt,Comonad:Jt,Contravariant:Kt,toString:en,equals:rn,concat:at,empty:ct,map:ft,bimap:st,promap:pt,ap:ht,lift2:lt,lift3:yt,apFirst:dt,apSecond:_t,of:vt,chain:mt,join:gt,chainRec:Ft,filter:bt,filterM:wt,alt:St,zero:jt,reduce:Ot,traverse:xt,sequence:At,extend:qt,extract:Rt,contramap:kt}}(r)}()}),c=t(function(t){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(n,e){t?t.exports=e(o,i,a,r):n.Fluture=e(n.concurrify,n.inspectf,n.sanctuaryTypeClasses,n.sanctuaryTypeIdentifiers)}(e||window||void 0,function(t,e,r,u){function o(t){return t instanceof g||u(t)===Pt}function i(t){return t instanceof Promise||Boolean(t)&&"function"==typeof t.then}function a(t){return"function"==typeof t}function c(t){return t.length>=2}function f(t){return t.length>=3}function s(t){return t===1/0||"number"==typeof t&&t>0&&t%1==0}function p(t){return null!==t&&"object"===(void 0===t?"undefined":n(t))}function h(t){return p(t)&&"function"==typeof t.next}function l(t){return p(t)&&"boolean"==typeof t.done}function y(t,n){return function(e,r,u){switch(arguments.length){case 1:return t(n,e);case 2:return t(n,e,r);default:return t(n,e,r,u)}}}function d(t,n,e){return function(r,u){return 1===arguments.length?t(n,e,r):t(n,e,r,u)}}function _(t,n,e,r){return function(u){return t(n,e,r,u)}}function v(t,n,e,r){throw new TypeError(t+" expects its "+Dt[n]+" argument to "+e+"\n  Actual: "+Mt(r))}function m(t,n){throw new TypeError(t+" was invoked outside the context of a Future. You might want to use a dispatcher instead\n  Called on: "+Mt(n))}function g(t){return a(t)||v("Future",0,"be a function",t),new U(t)}function F(t){return new J(t)}function b(t,n){return 1===arguments.length?y(b,t):(a(t)||v("Future.chainRec",0,"be a function",t),new $(t,n))}function w(t,n){return r.Apply.test(n)||v("Future.ap",1,"be an Apply",n),r.ap(t,n)}function S(t,n){return r.Functor.test(n)||v("Future.map",1,"be a Functor",n),r.map(t,n)}function j(t,n,e){return r.Bifunctor.test(e)||v("Future.bimap",2,"be a Bifunctor",e),r.bimap(t,n,e)}function O(t,n,e){return a(n)||v("Future.bimap",1,"be a Function",n),2===arguments.length?d(j,t,n):j(t,n,e)}function x(t,n){return r.Chain.test(n)||v("Future.chain",1,"be a Chain",n),r.chain(t,n)}function A(t,n){return o(n)||v("Future.and",1,"be a Future",n),new jt(t,n)}function q(t,n){return o(n)||v("Future.both",1,"be a Future",n),new xt(t,n)}function R(t,n){return new tt(t,n)}function k(t,n){return new nt(t,n)}function T(t,n){return Array.isArray(n)||v("Future.parallel",1,"be an array",n),new ut(t,n)}function C(t,n){return o(n)||v("Future.chainRej",1,"be a Future",n),new dt(n,t)}function E(t,n){return o(n)||v("Future.mapRej",1,"be a Future",n),new vt(n,t)}function P(t,n){return o(n)||v("Future.race",1,"be a Future",n),new St(n,t)}function N(t,n){return o(n)||v("Future.or",1,"be a Future",n),new Ot(t,n)}function M(t,n){return o(n)||v("Future.finally",1,"be a Future",n),new Tt(n,t)}function B(t,n){return o(n)||v("Future.value",1,"be a Future",n),n.value(t)}function z(t,n,e){return o(e)||v("Future.fork",2,"be a Future",e),e._f(t,n)}function I(t,n,e){return a(n)||v("Future.fork",1,"be a function",n),2===arguments.length?d(z,t,n):z(t,n,e)}function L(t,n,e){return o(e)||v("Future.fold",2,"be a Future",e),new At(e,t,n)}function D(t,n,e){return a(n)||v("Future.fold",1,"be a function",n),2===arguments.length?d(L,t,n):L(t,n,e)}function W(t,n,e){return a(e)||v("Future.hook",2,"be a Future",e),new kt(t,n,e)}function Q(t,n,e){return a(n)||v("Future.hook",1,"be a function",n),2===arguments.length?d(W,t,n):W(t,n,e)}function H(t,n){if(!(void 0===t||a(t)&&0===t.length))throw new TypeError("Future#fork expected the computation to return a nullary function or void\n  Actual: "+Mt(t)+"\n  From calling: "+It(n))}function U(t){this._computation=t}function V(t,n,e,r){if(!o(t))throw new TypeError("Future.chainRec expects the function its given to return a Future every time it is called. The value returned from"+(Dt[e]?" the "+Dt[e]+" call":" call "+e)+" was not a Future.\n  Actual: "+Mt(t)+"\n  From calling: "+It(n)+"\n  With: (Next, Done, "+Mt(r)+")")}function Y(t,n){if(!l(t))throw new TypeError("Future.chainRec expects the function its given to return a Future of an Iteration every time it is called. The Future returned from"+(Dt[n]?" the "+Dt[n]+" call":" call "+n)+" did not resolve to a member of Iteration.\n  You can create an uncomplete or complete Iteration using the next or done functions respectively. These are passed into your callback as first and second arguments.\n  Actual: Future.of("+Mt(t)+")")}function $(t,n){this._iterate=t,this._init=n}function X(t){this._pure=t,this._cancel=Bt,this._queue=[],this._queued=0,this._value=null,this._state=Vt}function G(t,n){this[$t]=t,this[Xt]=n}function J(t){this._value=t}function K(t){this._reason=t}function Z(t){this._computation=t}function tt(t,n){this._time=t,this._value=n}function nt(t,n){this._time=t,this._reason=n}function et(t,n){if(!o(t))throw new TypeError("Future.parallel expects its second argument to be an array of Futures. The value at position "+n+" in the array was not a Future\n  Actual: "+Mt(t))}function rt(t,n){n([])}function ut(t,n){this._futures=n,this._length=n.length,this._max=Math.min(this._length,t),0===n.length&&(this._f=rt)}function ot(t){h(t)||v("Future.do",0,'return an iterator, maybe you forgot the "*"',t)}function it(t){if(!l(t))throw new TypeError("Future.do was given an invalid generator: Its iterator did not return a valid iteration from iterator.next()\n  Actual: "+Mt(t));if(!t.done&&!o(t.value))throw new TypeError("A non-Future was produced by iterator.next() in Future.do. If you're using a generator, make sure you always `yield` a Future\n  Actual: "+t.value)}function at(t){this._generator=t}function ct(t){this._fn=t}function ft(t,n,e,r){this._length=arguments.length-1,this._fn=t,this._a=n,this._b=e,this._c=r,this._f=ft.FS[this._length]}function st(t,n,e,r,u){if(!i(t))throw new TypeError("Future.fromPromise expects the function its given to return a Promise/Thenable\n  Actual: "+Mt(t)+"\n  From calling: "+It(n)+"\n  With a: "+Mt(e)+(arguments.length>3?"\n  With b: "+Mt(r):"")+(arguments.length>4?"\n  With c: "+Mt(u):""))}function pt(t,n,e,r){this._length=arguments.length-1,this._fn=t,this._a=n,this._b=e,this._c=r,this._f=pt.FS[this._length]}function ht(t,n,e){if(!o(t))throw new TypeError("Future#chain expects the function its given to return a Future\n  Actual: "+Mt(t)+"\n  From calling: "+It(n)+"\n  With: "+Mt(e))}function lt(t,n){this._parent=t,this._chainer=n}function yt(t,n,e){if(!o(t))throw new TypeError("Future.chainRej expects the function its given to return a Future\n  Actual: "+Mt(t)+"\n  From calling: "+It(n)+"\n  With: "+Mt(e))}function dt(t,n){this._parent=t,this._chainer=n}function _t(t,n){this._parent=t,this._mapper=n}function vt(t,n){this._parent=t,this._mapper=n}function mt(t,n,e){this._parent=t,this._lmapper=n,this._rmapper=e}function gt(t){if(!a(t))throw new TypeError("Future#ap expects its first argument to be a Future of a Function\n  Actual: Future.of("+Mt(t)+")")}function Ft(t,n){this._mval=t,this._mfunc=n}function bt(t,n){this._mval=t,this._mfunc=n}function wt(t){this._parent=t}function St(t,n){this._left=t,this._right=n}function jt(t,n){this._left=t,this._right=n}function Ot(t,n){this._left=t,this._right=n}function xt(t,n){this._left=t,this._right=n}function At(t,n,e){this._parent=t,this._lfold=n,this._rfold=e}function qt(t,n,e){if(!o(t))throw new TypeError("Future#hook expects the first function its given to return a Future\n  Actual: "+Mt(t)+"\n  From calling: "+It(n)+"\n  With: "+Mt(e))}function Rt(t,n,e){if(!o(t))throw new TypeError("Future#hook expects the second function its given to return a Future\n  Actual: "+Mt(t)+"\n  From calling: "+It(n)+"\n  With: "+Mt(e))}function kt(t,n,e){this._acquire=t,this._dispose=n,this._consume=e}function Tt(t,n){this._computation=t,this._cleanup=n}function Ct(){}function Et(t){return t instanceof Gt||u(t)===Gt["@@type"]}var Pt="fluture/Future",Nt={map:"fantasy-land/map",bimap:"fantasy-land/bimap",chain:"fantasy-land/chain",chainRec:"fantasy-land/chainRec",ap:"fantasy-land/ap",of:"fantasy-land/of"},Mt=r.toString,Bt=function(){},zt=function(t,n){return n.replace(/^/gm,t).replace(t,"")},It=function(t){return zt("  ",e(2,t))},Lt=function(t){return t.name?t.name:"<anonymous>"},Dt=["first","second","third","fourth","fifth"],Wt=function(t){return{done:!1,value:t}},Qt=function(t){return{done:!0,value:t}};g["@@type"]=Pt,g.prototype._f=null,g.prototype.extractLeft=function(){return[]},g.prototype.extractRight=function(){return[]},g.prototype.of=F,g.prototype.ap=function(t){return o(this)||m("Future#ap",this),o(t)||v("Future#ap",0,"be a Future",t),new Ft(this,t)},g.prototype.map=function(t){return o(this)||m("Future#map",this),a(t)||v("Future#map",0,"be a function",t),new _t(this,t)},g.prototype.bimap=function(t,n){return o(this)||m("Future#bimap",this),a(t)||v("Future#bimap",0,"be a function",t),a(n)||v("Future#bimap",1,"be a function",n),new mt(this,t,n)},g.prototype.chain=function(t){return o(this)||m("Future#chain",this),a(t)||v("Future#chain",0,"be a function",t),new lt(this,t)},g.prototype.chainRej=function(t){return o(this)||m("Future.chainRej",this),
a(t)||v("Future.chainRej",0,"a function",t),new dt(this,t)},g.prototype.mapRej=function(t){return o(this)||m("Future#mapRej",this),a(t)||v("Future#mapRej",0,"be a function",t),new vt(this,t)},g.prototype.swap=function(){return o(this)||m("Future#swap",this),new wt(this)},g.prototype.race=function(t){return o(this)||m("Future#race",this),o(t)||v("Future#race",0,"be a Future",t),new St(this,t)},g.prototype.and=function(t){return o(this)||m("Future#and",this),o(t)||v("Future#and",0,"be a Future",t),new jt(this,t)},g.prototype.or=function(t){return o(this)||m("Future#or",this),o(t)||v("Future#or",0,"be a Future",t),new Ot(this,t)},g.prototype.both=function(t){return o(this)||m("Future#both",this),o(t)||v("Future#both",0,"be a Future",t),new xt(this,t)},g.prototype.fold=function(t,n){return o(this)||m("Future#fold",this),a(t)||v("Future#fold",0,"be a function",t),a(n)||v("Future#fold",1,"be a function",n),new At(this,t,n)},g.prototype.hook=function(t,n){return o(this)||m("Future#hook",this),a(t)||v("Future#hook",0,"be a function",t),a(n)||v("Future#hook",1,"be a function",n),new kt(this,t,n)},g.prototype.finally=function(t){return o(this)||m("Future#finally",this),o(t)||v("Future#finally",0,"be a Future",t),new Tt(this,t)},g.prototype.cache=function(){return o(this)||m("Future#cache",this),new X(this)},g.prototype.fork=function(t,n){return o(this)||m("Future#fork",this),a(t)||v("Future#fork",0,"be a function",t),a(n)||v("Future#fork",1,"be a function",n),this._f(t,n)},g.prototype.value=function(t){return o(this)||m("Future#value",this),a(t)||v("Future#value",0,"be a function",t),this._f(function(t){throw new Error("Future#value was called on a rejected Future\n  Actual: Future.reject("+Mt(t)+")")},t)},g.prototype.promise=function(){o(this)||m("Future#promise",this);var t=this;return new Promise(function(n,e){t._f(e,n)})},g.of=F,g.chainRec=b,g.Future=g,g.isFuture=o,g.ap=function(t,n){return r.Apply.test(t)||v("Future.ap",0,"be an Apply",t),1===arguments.length?y(w,t):w(t,n)},g.map=function(t,n){return a(t)||v("Future.map",0,"be a Function",t),1===arguments.length?y(S,t):S(t,n)},g.bimap=function(t,n,e){return a(t)||v("Future.bimap",0,"be a Function",t),1===arguments.length?y(O,t):2===arguments.length?O(t,n):O(t,n,e)},g.chain=function(t,n){return a(t)||v("Future.chain",0,"be a Function",t),1===arguments.length?y(x,t):x(t,n)},g.and=function(t,n){return o(t)||v("Future.and",0,"be a Future",t),1===arguments.length?y(A,t):A(t,n)},g.both=function(t,n){return o(t)||v("Future.both",0,"be a Future",t),1===arguments.length?y(q,t):q(t,n)},g.reject=function(t){return new K(t)},g.after=function(t,n){return s(t)||v("Future.after",0,"be a positive integer",t),1===arguments.length?y(R,t):R(t,n)},g.rejectAfter=function(t,n){return s(t)||v("Future.rejectAfter",0,"be a positive integer",t),1===arguments.length?y(k,t):k(t,n)},g.try=function(t){return a(t)||v("Future.try",0,"be a function",t),new ct(t)},g.encase=function t(n,e){return 1===arguments.length?y(t,n):(a(n)||v("Future.encase",0,"be a function",n),new ft(n,e))},g.encase2=function t(n,e,r){switch(arguments.length){case 1:return y(t,n);case 2:return d(t,n,e);default:return a(n)||v("Future.encase2",0,"be a function",n),c(n)||v("Future.encase2",0,"take two arguments",n),new ft(n,e,r)}},g.encase3=function t(n,e,r,u){switch(arguments.length){case 1:return y(t,n);case 2:return d(t,n,e);case 3:return _(t,n,e,r);default:return a(n)||v("Future.encase3",0,"be a function",n),f(n)||v("Future.encase3",0,"take three arguments",n),new ft(n,e,r,u)}},g.fromPromise=function t(n,e){return 1===arguments.length?y(t,n):(a(n)||v("Future.fromPromise",0,"be a function",n),new pt(n,e))},g.fromPromise2=function t(n,e,r){switch(arguments.length){case 1:return y(t,n);case 2:return d(t,n,e);default:return a(n)||v("Future.fromPromise2",0,"be a function",n),c(n)||v("Future.fromPromise2",0,"take two arguments",n),new pt(n,e,r)}},g.fromPromise3=function t(n,e,r,u){switch(arguments.length){case 1:return y(t,n);case 2:return d(t,n,e);case 3:return _(t,n,e,r);default:return a(n)||v("Future.fromPromise3",0,"be a function",n),f(n)||v("Future.fromPromise3",0,"take three arguments",n),new pt(n,e,r,u)}},g.node=function(t){return a(t)||v("Future.node",0,"be a function",t),new Z(t)},g.parallel=function(t,n){return s(t)||v("Future.parallel",0,"be a positive integer",t),1===arguments.length?y(T,t):T(t,n)},g.do=function(t){return a(t)||v("Future.do",0,"be a function",t),new at(t)},g.chainRej=function(t,n){return a(t)||v("Future.chainRej",0,"be a Function",t),1===arguments.length?y(C,t):C(t,n)},g.mapRej=function(t,n){return a(t)||v("Future.mapRej",0,"be a Function",t),1===arguments.length?y(E,t):E(t,n)},g.race=function(t,n){return o(t)||v("Future.race",0,"be a Future",t),1===arguments.length?y(P,t):P(t,n)},g.or=function(t,n){return o(t)||v("Future.or",0,"be a Future",t),1===arguments.length?y(N,t):N(t,n)},g.finally=function(t,n){return o(t)||v("Future.finally",0,"be a Future",t),1===arguments.length?y(M,t):M(t,n)},g.value=function(t,n){return a(t)||v("Future.value",0,"be a Function",t),1===arguments.length?y(B,t):B(t,n)},g.swap=function(t){return o(t)||v("Future.swap",0,"be a Future",t),new wt(t)},g.promise=function(t){return o(t)||v("Future.promise",0,"be a Future",t),t.promise()},g.cache=function(t){return o(t)||v("Future.cache",0,"be a Future",t),new X(t)},g.extractLeft=function(t){return o(t)||v("Future.extractLeft",0,"be a Future",t),t.extractLeft()},g.extractRight=function(t){return o(t)||v("Future.extractRight",0,"be a Future",t),t.extractRight()},g.fork=function(t,n,e){return a(t)||v("Future.fork",0,"be a function",t),1===arguments.length?y(I,t):2===arguments.length?I(t,n):I(t,n,e)},g.fold=function(t,n,e){return a(t)||v("Future.fold",0,"be a function",t),1===arguments.length?y(D,t):2===arguments.length?D(t,n):D(t,n,e)},g.hook=function(t,n,e){return o(t)||v("Future.hook",0,"be a Future",t),1===arguments.length?y(Q,t):2===arguments.length?Q(t,n):Q(t,n,e)},g.util={Next:Wt,Done:Qt,isFuture:o,isThenable:i,isFunction:a,isBinary:c,isTernary:f,isPositiveInteger:s,isObject:p,isIterator:h,isIteration:l,padf:zt,showf:It,fid:Lt,unaryPartial:y,binaryPartial:d,ternaryPartial:_},g[Nt.of]=g.of,g[Nt.chainRec]=b,g.prototype[Nt.ap]=g.prototype.ap,g.prototype[Nt.map]=g.prototype.map,g.prototype[Nt.bimap]=g.prototype.bimap,g.prototype[Nt.chain]=g.prototype.chain,U.prototype=Object.create(g.prototype),U.prototype._f=function(t,n){var e=!0,r=this._computation(function(n){e&&(e=!1,t(n))},function(t){e&&(e=!1,n(t))});return H(r,this._computation),function(){e&&r&&r(),e=!1}},U.prototype.toString=function(){return"Future("+It(this._computation)+")"};var Ht=0,Ut=1;$.prototype=Object.create(g.prototype),$.prototype._f=function(t,n){var e=this,r=Bt,u=0;return function o(i){function a(t){Y(t,u),u+=1,c===Ht?(c=Ut,i=t):o(t)}for(var c=Ht;!i.done;){c=Ht;var f=e._iterate(Wt,Qt,i.value);if(V(f,e._iterate,u,i.value),r=f._f(t,a),c!==Ut)return void(c=2)}n(i.value)}(Wt(e._init)),function(){r()}},$.prototype.toString=function(){return"Future.chainRec("+It(this._iterate)+", "+Mt(this._init)+")"};var Vt=X.Cold=0,Yt=X.Pending=1,$t=X.Rejected=2,Xt=X.Resolved=3;X.prototype=Object.create(g.prototype),X.prototype.extractLeft=function(){return this._state===$t?[this._value]:[]},X.prototype.extractRight=function(){return this._state===Xt?[this._value]:[]},X.prototype._addToQueue=function(t,n){var e=this;if(e._state>Yt)return Bt;var r=e._queue.push(new G(t,n))-1;return e._queued=e._queued+1,function(){e._state>Yt||(e._queue[r]=void 0,e._queued=e._queued-1,0===e._queued&&e.reset())}},X.prototype._drainQueue=function(){if(!(this._state<=Yt)&&0!==this._queued){for(var t=this._queue,n=t.length,e=this._state,r=this._value,u=0;u<n;u++)t[u]&&t[u][e](r),t[u]=void 0;this._queue=void 0,this._queued=0}},X.prototype.reject=function(t){this._state>Yt||(this._value=t,this._state=$t,this._drainQueue())},X.prototype.resolve=function(t){this._state>Yt||(this._value=t,this._state=Xt,this._drainQueue())},X.prototype.run=function(){var t=this;t._state>Vt||(t._state=Yt,t._cancel=t._pure._f(function(n){t.reject(n)},function(n){t.resolve(n)}))},X.prototype.reset=function(){this._state!==Vt&&(this._state>Yt&&this._cancel(),this._cancel=Bt,this._queue=[],this._queued=0,this._value=void 0,this._state=Vt)},X.prototype._f=function(t,n){var e=this,r=Bt;switch(e._state){case 1:r=e._addToQueue(t,n);break;case 2:t(e._value);break;case 3:n(e._value);break;default:r=e._addToQueue(t,n),e.run()}return r},X.prototype.toString=function(){return this._pure.toString()+".cache()"},J.prototype=Object.create(g.prototype),J.prototype.extractRight=function(){return[this._value]},J.prototype._f=function(t,n){return n(this._value),Bt},J.prototype.toString=function(){return"Future.of("+Mt(this._value)+")"},K.prototype=Object.create(g.prototype),K.prototype.extractLeft=function(){return[this._reason]},K.prototype._f=function(t){return t(this._reason),Bt},K.prototype.toString=function(){return"Future.reject("+Mt(this._reason)+")"},Z.prototype=Object.create(g.prototype),Z.prototype._f=function(t,n){var e=!0;return this._computation(function(r,u){e&&(r?t(r):n(u),e=!1)}),function(){e=!1}},Z.prototype.toString=function(){return"Future.node("+It(this._computation)+")"},tt.prototype=Object.create(g.prototype),tt.prototype.extractRight=function(){return[this._value]},tt.prototype._f=function(t,n){var e=setTimeout(n,this._time,this._value);return function(){clearTimeout(e)}},tt.prototype.toString=function(){return"Future.after("+Mt(this._time)+", "+Mt(this._value)+")"},nt.prototype=Object.create(g.prototype),nt.prototype.extractLeft=function(){return[this._reason]},nt.prototype._f=function(t){var n=setTimeout(t,this._time,this._reason);return function(){clearTimeout(n)}},nt.prototype.toString=function(){return"Future.rejectAfter("+Mt(this._time)+", "+Mt(this._reason)+")"},ut.prototype=Object.create(g.prototype),ut.prototype._f=function(t,n){for(var e=this,r=new Array(e._max),u=new Array(e._length),o=e._max,i=0,a=function(){for(var t=0;t<e._max;t++)r[t]&&r[t]()},c=function(f,s,p){et(f,s),r[p]=f._f(function(n){a(),t(n)},function(t){u[s]=t,i+=1,o<e._length?c(e._futures[o],o++,p):i===e._length&&n(u)})},f=0;f<e._max;f++)c(e._futures[f],f,f);return a},ut.prototype.toString=function(){return"Future.parallel("+Mt(this._max)+", ["+this._futures.map(Mt).join(", ")+"])"},at.prototype=Object.create(g.prototype),at.prototype._f=function(t,n){var e=this._generator();return ot(e),new $(function(t,n,r){var u=e.next(r);return it(u),u.done?new J(u):u.value.map(t)},void 0)._f(t,n)},at.prototype.toString=function(){return"Future.do("+It(this._generator)+")"},ct.prototype=Object.create(g.prototype),ct.prototype._f=function(t,n){var e=void 0;try{e=this._fn()}catch(n){return t(n),Bt}return n(e),Bt},ct.prototype.toString=function(){return"Future.try("+Mt(this._fn)+")"},ft.FS={1:function(t,n){var e=void 0;try{e=this._fn(this._a)}catch(n){return t(n),Bt}return n(e),Bt},2:function(t,n){var e=void 0;try{e=this._fn(this._a,this._b)}catch(n){return t(n),Bt}return n(e),Bt},3:function(t,n){var e=void 0;try{e=this._fn(this._a,this._b,this._c)}catch(n){return t(n),Bt}return n(e),Bt}},ft.prototype=Object.create(g.prototype),ft.prototype.toString=function(){var t=[this._a,this._b,this._c].slice(0,this._length).map(Mt).join(", ");return"Future.encase"+(this._length>1?this._length:"")+"("+Mt(this._fn)+", "+t+")"},pt.FS={1:function(t,n){var e=this._fn(this._a);return st(e,this._fn,this._a),e.then(n,t),Bt},2:function(t,n){var e=this._fn(this._a,this._b);return st(e,this._fn,this._a,this._b),e.then(n,t),Bt},3:function(t,n){var e=this._fn(this._a,this._b,this._c);return st(e,this._fn,this._a,this._b,this._c),e.then(n,t),Bt}},pt.prototype=Object.create(g.prototype),pt.prototype.toString=function(){var t=[this._a,this._b,this._c].slice(0,this._length).map(Mt).join(", ");return"Future.fromPromise"+(this._length>1?this._length:"")+"("+Mt(this._fn)+", "+t+")"},lt.prototype=Object.create(g.prototype),lt.prototype._f=function(t,n){var e=this,r=void 0,u=e._parent._f(t,function(u){var o=e._chainer(u);ht(o,e._chainer,u),r=o._f(t,n)});return r||(r=u,function(){r()})},lt.prototype.toString=function(){return this._parent.toString()+".chain("+It(this._chainer)+")"},dt.prototype=Object.create(g.prototype),dt.prototype._f=function(t,n){var e=this,r=void 0,u=e._parent._f(function(u){var o=e._chainer(u);yt(o,e._chainer,u),r=o._f(t,n)},n);return r||(r=u,function(){r()})},dt.prototype.toString=function(){return this._parent.toString()+".chainRej("+It(this._chainer)+")"},_t.prototype=Object.create(g.prototype),_t.prototype._f=function(t,n){var e=this;return e._parent._f(t,function(t){n(e._mapper(t))})},_t.prototype.toString=function(){return this._parent.toString()+".map("+It(this._mapper)+")"},vt.prototype=Object.create(g.prototype),vt.prototype._f=function(t,n){var e=this;return e._parent._f(function(n){t(e._mapper(n))},n)},vt.prototype.toString=function(){return this._parent.toString()+".mapRej("+It(this._mapper)+")"},mt.prototype=Object.create(g.prototype),mt.prototype._f=function(t,n){var e=this;return e._parent._f(function(n){t(e._lmapper(n))},function(t){n(e._rmapper(t))})},mt.prototype.toString=function(){return this._parent.toString()+".bimap("+It(this._lmapper)+", "+It(this._rmapper)+")"},Ft.prototype=Object.create(g.prototype),Ft.prototype._f=function(t,n){var e=this,r=void 0,u=e._mval._f(t,function(u){r=e._mfunc._f(t,function(t){gt(t),r=Bt,n(t(u))})});return r||(r=u,function(){r()})},Ft.prototype.toString=function(){return this._mval.toString()+".ap("+this._mfunc.toString()+")"},bt.prototype=Object.create(g.prototype),bt.prototype._f=function(t,n){function e(n){a||(a=!0,t(n))}var r=void 0,u=void 0,o=!1,i=!1,a=!1,c=void 0,f=void 0;return c=this._mval._f(e,function(t){if(c=Bt,!o)return i=!0,void(u=t);gt(r),n(r(t))}),f=this._mfunc._f(e,function(t){if(f=Bt,!i)return o=!0,void(r=t);gt(t),n(t(u))}),function(){c(),f()}},bt.prototype.toString=function(){return"new FutureParallelAp("+this._mval.toString()+", "+this._mfunc.toString()+")"},wt.prototype=Object.create(g.prototype),wt.prototype._f=function(t,n){return this._parent._f(n,t)},wt.prototype.toString=function(){return this._parent.toString()+".swap()"},St.prototype=Object.create(g.prototype),St.prototype._f=function(t,n){var e=!1,r=Bt,u=Bt,o=function(){e=!0,r(),u()},i=function(n){o(),t(n)},a=function(t){o(),n(t)};return r=this._left._f(i,a),e||(u=this._right._f(i,a)),o},St.prototype.toString=function(){return this._left.toString()+".race("+this._right.toString()+")"},jt.prototype=Object.create(g.prototype),jt.prototype._f=function(t,n){var e=!1,r=!1,u=void 0,o=Bt,i=Bt;return o=this._left._f(function(n){e=!0,i(),t(n)},function(o){return e?t(u):r?n(u):r=!0}),i=this._right._f(function(n){return r?t(n):(e=!0,u=n)},function(t){return r?n(t):(r=!0,u=t)}),function(){o(),i()}},jt.prototype.toString=function(){return this._left.toString()+".and("+this._right.toString()+")"},Ot.prototype=Object.create(g.prototype),Ot.prototype._f=function(t,n){var e=!1,r=!1,u=void 0,o=void 0,i=Bt,a=Bt;return i=this._left._f(function(i){return r?t(o):e?n(u):r=!0},function(t){e=!0,a(),n(t)}),e||(a=this._right._f(function(n){return e||(r?t(n):(o=n,r=!0))},function(t){return e||(r?n(t):(u=t,e=!0))})),function(){i(),a()}},Ot.prototype.toString=function(){return this._left.toString()+".or("+this._right.toString()+")"},xt.prototype=Object.create(g.prototype),xt.prototype._f=function(t,n){var e=!1,r=!1,u=Bt,o=Bt,i=new Array(2);return u=this._left._f(function(n){r=!0,o(),t(n)},function(t){i[0]=t,e?n(i):e=!0}),r||(o=this._right._f(function(n){r=!0,u(),t(n)},function(t){i[1]=t,e?n(i):e=!0})),function(){u(),o()}},xt.prototype.toString=function(){return this._left.toString()+".both("+this._right.toString()+")"},At.prototype=Object.create(g.prototype),At.prototype._f=function(t,n){var e=this;return e._parent._f(function(t){n(e._lfold(t))},function(t){n(e._rfold(t))})},At.prototype.toString=function(){return this._parent.toString()+".fold("+It(this._lfold)+", "+It(this._rfold)+")"},kt.prototype=Object.create(g.prototype),kt.prototype._f=function(t,n){var e=this,r=void 0,u=Bt;return u=e._acquire._f(t,function(o){var i=function(n){var u=e._dispose(o);return qt(u,e._dispose,o),r=u._f(t,n)},a=e._consume(o);Rt(a,e._consume,o);var c=a._f(function(n){return i(function(e){return t(n)})},function(t){return i(function(e){return n(t)})});r=function(){i(Bt)(),u(),c()}}),r=r||u,function(){r()}},kt.prototype.toString=function(){return this._acquire.toString()+".hook("+It(this._dispose)+", "+It(this._consume)+")"},Tt.prototype=Object.create(g.prototype),Tt.prototype._f=function(t,n){var e=this,r=void 0,u=e._computation._f(function(n){r=e._cleanup._f(t,function(){t(n)})},function(u){r=e._cleanup._f(t,function(){n(u)})});return r||(r=function(){u(),e._cleanup._f(Bt,Bt)()},function(){r()})},Tt.prototype.toString=function(){return this._computation.toString()+".finally("+this._cleanup.toString()+")"},Ct.prototype=Object.create(g.prototype),Ct.prototype._f=function(){return Bt},Ct.prototype.toString=function(){return"Future.never"},g.never=new Ct,g.classes={SafeFuture:U,ChainRec:$,CachedFuture:X,FutureOf:J,FutureReject:K,FutureRejectAfter:nt,FutureNode:Z,FutureAfter:tt,FutureParallel:ut,FutureDo:at,FutureTry:ct,FutureEncase:ft,FutureFromPromise:pt,FutureChain:lt,FutureChainRej:dt,FutureMap:_t,FutureMapRej:vt,FutureBimap:mt,FutureAp:Ft,FutureParallelAp:bt,FutureSwap:wt,FutureRace:St,FutureAnd:jt,FutureOr:Ot,FutureBoth:xt,FutureFold:At,FutureHook:kt,FutureFinally:Tt,FutureNever:Ct};var Gt=t(g,g.never,g.race,function(t,n){return new bt(t,n)});return g.Par=Gt,g.seq=function(t){return Et(t)||v("Future.seq",0,"to be a Par",t),t.sequential},g})}),f=function(t,n){return Object.keys(t).forEach(function(e){n.setRequestHeader(e,t[e])}),n},s=["loadstart","progress","abort","error","load","timeout","loadend"],p=function(t,n){return s.forEach(function(e){t[e]&&n.addEventListener(e,t[e])}),n};return n}();
